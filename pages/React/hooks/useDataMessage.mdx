---
title: 'useDataMessage'
---

import OptionTable from '@components/common/Table/OptionTable';
import Pill from '@components/common/Pill/Pill';

# useDataMessage

The useDataMessage hook allows you to send and receive messages to and from other peers in the room.

```tsx
const {
    sendData
  } = useDataMessage({
    onMessage(payload: string, from: string, label?: string) ();
  });
```

## Props
The useDataMessage hook accepts an object with the following fields as props.

{/* onMessage */}
### <span className="font-mono font-semibold">onMessage</span>
<div className='w-20 mt-4'>
  <Pill>Optional</Pill>
</div>

<OptionTable
  headers={['Description', 'Return Type']}
  options={[
    [
      'This function will be called when you receive a data message from any other peer in the room.',
      'void',
    ],
  ]}
/>

<OptionTable
  headers={['Parameter Name', 'Type', 'Description', 'Required']}
  options={[
    [
      'payload',
      'string',
      'The message string.',
      'Yes',
    ],
    [
      'from',
      'string',
      'The peerId of the sender.',
      'Yes',
    ],
    [
      'label',
      'string',
      'An optional label field for the message.',
      'No',
    ],
  ]}
/>

#### Example Usage

```tsx
const dataMessage = useDataMessage({ onMessage: (payload, from, label) => {
	console.log("Received a message!");
	console.log("Message: ", payload);
    console.log("Sender: ", from);
    if(label) console.log("Label: ", label);
    // your code here
}});
```


{/* onVolatileMesssage
### <span className="font-mono font-semibold">onVolatileMesssage</span>
<div className='w-20 mt-4'>
  <Pill>Optional</Pill>
</div>

<OptionTable
  headers={['Description', 'Return Type']}
  options={[
    [
      'TODO:.',
      'void',
    ],
  ]}
/>

<OptionTable
  headers={['Parameter Name', 'Type', 'Description', 'Required']}
  options={[
    [
      'payload',
      'string',
      'The message string.',
      'Yes',
    ],
    [
      'from',
      'string',
      'The peerId of the sender.',
      'Yes',
    ],
    [
      'label',
      'string',
      'An optional label field for the message.',
      'No',
    ],
  ]}
/>

#### Example Usage

```tsx
const dataMessage = useDataMessage({ onVolatileMesssage: (payload, from, label) => {
	console.log("Received a message!");
	console.log("Message: ", payload);
    console.log("Sender: ", from);
    if(label) console.log("Label: ", label);
    // your code here
}});
``` */}

## Returns
The useDataMessage hook returns an object with the following fields.

{/* sendData */}
### <span className="font-mono font-semibold">sendData</span>
<div className='w-20 mt-4'>
  <Pill>Function</Pill>
</div>

<OptionTable
  headers={['Description', 'Return Type']}
  options={[
    [
      'Send a message to other peers in the room.',
      'Promise<Room>',
    ],
  ]}
/>

<OptionTable
  headers={['Parameter Name', 'Type', 'Description', 'Required']}
  options={[
    [
      'data',
      '{ to: string[] | "*"; payload: string; }',
      'Object containing the message to be sent (payload) and an array of peerIds to send the message to (you can use a "*" to denote all peers in the room).',
      'Yes',
    ],
  ]}
/>