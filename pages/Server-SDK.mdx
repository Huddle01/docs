---
title: 'Server-SDK'
---

import { Tab, Tabs } from 'nextra-theme-docs';


## Server SDK

The Huddle01 Server SDK allows you to perform protected admin actions on your server side, like generating peer access tokens and starting and stopping meeting recordings and livestreams.

### Installation


 <Tabs items={['pnpm', 'npm', 'yarn']}>
       <Tab>
            ```bash 
      npm install @huddle01/server-sdk@beta
        ```
              </Tab>

    <Tab>
          ```bash
      yarn add @huddle01/server-sdk@beta
      ```
            </Tab>

     <Tab>
           ```bash
      yarn add @huddle01/server-sdk@beta
      ```
            </Tab>
          </Tabs>


### Access Token

To join a Huddle01 room, every peer needs a unique access token. This is how you generate one on your own backend server. You can then call your internal API to get the access token and pass it to the `joinRoom` method on the client side.

<Tabs items={['module','commonjs']}>
       <Tab>
            ```ts 
      import { AccessToken, Role } from '@huddle01/server-sdk/auth';
        ```
              </Tab>

    <Tab>
          ```js
      const HuddleAuth = require('@huddle01/server-sdk/auth');
      const { AccessToken, Role } = HuddleAuth
      ```
            </Tab>

   
          </Tabs>


```jsx

const accessToken = new AccessToken({
    apiKey: 'YOUR_API_KEY',
    roomId: 'YOUR_ROOM_ID',
    //available roles: Role.HOST, Role.CO_HOST, Role.SPEAKER, Role.LISTENER, Role.GUEST - depending on the privileges you want to give to the user
    role: Role.HOST,
    //custom permissions give you more flexibility in terms of the user privileges than a pre-defined role
    permissions: {
          admin: true,
          canConsume: true,
          canProduce: true,
          canProduceSources: {
            cam: true,
            mic: true,
            screen: true,
          },
          canRecvData: true,
          canSendData: true,
          canUpdateMetadata: true,
        },
        options: {
          metadata: { 
             // you can add any custom attributes here which you want to associate with the user
            walletAddress: "mizanxali.eth"
          },
        },
  });

const token = accessToken.toJwt();

```




### Recording

To start recording a Huddle01 meeting, you need to first create a `Recorder` instance using your project ID and API key. You can then call the `startRecording` method on the instance to start recording a meeting by passing the room ID. To stop the recording, you can call the `stop` method on the instance.

```jsx
import { Recorder } from '@huddle01/server-sdk/recorder';

const recorder = new Recorder("PROJECT_ID", "API_KEY");

// Start Recording
recorder.startRecording({
	roomId: 'YOUR_ROOM_ID',
	token: 'YOUR_TOKEN'
})

// Stop Recording
recorder.stop({
	roomId: 'YOUR_ROOM_ID',
})
```

All processed recordings can then be fetched at any time using the : [Get Recordings API](/apis/get-recordings)

###  Livestreaming

To start livestreaming a Huddle01 meeting to any third party streaming platform, you need to first create a `Recorder` instance with your project ID and API key. You can then call the `startLivestream` method to start livestreaming a meeting by passing the room IDg. It accepts an array of `rtmpUrls` which you will get from your preferred streaming platform. To stop the livestream, you can call the `stop` method on the instance.

```jsx
import { Recorder } from '@huddle01/server-sdk/recorder';

const recorder = new Recorder("PROJECT_ID", "API_KEY");


// Start Livestreaming
recorder.startLivestream({
	roomId: 'YOUR_ROOM_ID',
	token: 'YOUR_TOKEN'
	rtmpUrls: []
})

// Stop Livestreaming
recorder.stop({
	roomId: 'YOUR_ROOM_ID',
})
```
{/* 
### Web Hooks

```jsx
import { WebhookReceiver } from '@huddle01/server-sdk/webhooks';

const webhookReceiver = new WebhookReceiver({
  apiKey: 'YOUR_API_KEY',
  apiSecret: 'YOUR_API_SECRET',
});
```

### Events

You can listen to these event on your server side and perform various actions based on the events. Following is the list of events you can listen to: 



 `**meeting:started**`
    
    
    | Attributes | Type |
    | --- | --- |
    | roomId | string |
    | createdAt | number |
- `**meeting:ended**`
    
    
    | Attributes | Type |
    | --- | --- |
    | roomId | string |
    | createdAt | number |
    | endedAt | number |
    | duration | number |
    | participants | number |
    | maxParticipants | number |
- `**peer:joined**`
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | roomId | string |
    | joinedAt | number |
    | metadata | string? |
    | role | string? |
    | browser | Browser |
    | device | Device |
    
    **Browser**
    
    | name | string? |
    | --- | --- |
    | version | string? |
    
    **Device**
    
    | model | string? |
    | --- | --- |
    | type | string? |
    | vendor | string? |
    
- `**peer:left**`
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | roomId | string |
    | leftAt | number |
    | duration | number |
    | metadata | string? |
    | role | string? |
- `**peer:trackPublished**`
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | track | string |
- **`peer:trackUnpublished`**
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | track | string |
- `**recording:started**`
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | roomId | string |
- **`recording:stopped`**
    
    
    | Attributes | Type |
    | --- | --- |
    | id | string |
    | roomId | string | */}